local M = {}

function M.get_header()
	local utils = require "modules.dashboard.utils"
	local headers = M.headers
	local themes = M.themes

	math.randomseed(os.time())

	local date = os.date "*t"
	local year = tonumber(date.year)
	local month = tonumber(date.month)
	local day = tonumber(date.day)

	for _, t in ipairs(themes) do
		if t.holiday == "easter" then
			local easter = utils.calculate_easter()
			t.month = easter.month
			t.day = easter.day
			t.holiday = nil
		elseif t.holiday == "us_thanksgiving" then
			local thanksgiving = utils.calculate_us_thanksgiving()
			t.month = thanksgiving.month
			t.day = thanksgiving.day
			t.holiday = nil
		end

		local from = t.from or t
		local to = t.to or t

		if month >= from.month then
			from.year = year
			to.year = to.month < from.month and year + 1 or year
		else -- month < from.month
			from.year = year - 1
			to.year = to.month < from.month and year or year - 1
		end

		local ff = from.year * 10000 + from.month * 100 + from.day
		local tt = to.year * 10000 + to.month * 100 + to.day
		local dd = year * 10000 + month * 100 + day

		if dd >= ff and dd <= tt then
			local random_index = math.random(#headers[t.theme])
			return headers[t.theme][random_index]
		end
	end

	local random_index = math.random(#headers["default"])
	return headers["default"][random_index]
end

M.themes = {
	{ theme = "halloween", month = 10, day = 31 },
	{ theme = "starwars", from = { month = 11, day = 1 }, to = { month = 11, day = 30 } },
	{ theme = "xmas", from = { month = 12, day = 28 }, to = { month = 1, day = 14 } },
}

---@type snacks.dashboard.Item[]
M.keys = {
	{ icon = "ÔÄÇ ", key = "f", desc = "Find File", action = ":lua Snacks.dashboard.pick('files')" },
	{ icon = "ÔÖõ ", key = "n", desc = "New File", action = ":ene | startinsert" },
	{ icon = "ÔÄ¢ ", key = "g", desc = "Find Text", action = ":lua Snacks.dashboard.pick('live_grep')" },
	{ icon = "ÔÉÖ ", key = "r", desc = "Recent Files", action = ":lua Snacks.dashboard.pick('oldfiles')" },
	{ icon = "ÔÉá ", key = "s", desc = "Select Session", action = ":lua require('persistence').select()" },
	{
		icon = "Û∞¶õ ",
		key = "l",
		desc = "Restore Session",
		action = ":lua require('persistence').load { last = true }",
	},
	{
		icon = "Ôê£ ",
		key = "c",
		desc = "Config",
		action = ":lua Snacks.dashboard.pick('files', { cwd = vim.fn.stdpath('config') })",
	},
	{ icon = "Û∞í≤ ", key = "L", desc = "Lazy", action = ":Lazy", enabled = package.loaded.lazy ~= nil },
	{ icon = "Û±êÅ ", key = "z", desc = "Zoxide", action = ":Telescope zoxide list" },
	{ icon = "ÔÑú ", key = "k", desc = "Keymaps", action = ":lua Snacks.dashboard.pick('keymaps')" },
	{ icon = "Ôê¶ ", key = "q", desc = "Quit", action = ":qa" },
}

M.startup = function()
	local stats = require("lazy").stats()
	local ms = math.floor(stats.startuptime) .. " ms"

	return {
		align = "center",
		text = {
			{ "Ôêß Loaded ", hl = "footer" },
			{ stats.loaded .. "/" .. stats.count, hl = "special" },
			{ " plugins in ", hl = "footer" },
			{ ms .. "ms", hl = "special" },
		},
	}
end

M.headers = {
	["default"] = {
		[[
‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ñà‚ïó
‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ïë
‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ïë
‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù  ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë
‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïù ‚ñà‚ñà‚ïë
‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ‚ïö‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù]],
	},
	["anime"] = {
		[[
‚°Ü‚£ø‚£ø‚£¶‚†π‚£≥‚£≥‚£ï‚¢Ö‚†à‚¢ó‚¢ï‚¢ï‚¢ï‚¢ï‚¢ï‚¢à‚¢Ü‚†ü‚†ã‚†â‚†Å‚†â‚†â‚†Å‚†à‚†º‚¢ê‚¢ï
‚°ó‚¢∞‚£∂‚£∂‚£¶‚£ù‚¢ù‚¢ï‚¢ï‚†Ö‚°Ü‚¢ï‚¢ï‚¢ï‚¢ï‚¢ï‚£¥‚†è‚£†‚°∂‚†õ‚°â‚°â‚°õ‚¢∂‚£¶‚°Ä‚†ê‚£ï
‚°ù‚°Ñ‚¢ª‚¢ü‚£ø‚£ø‚£∑‚£ï‚£ï‚£Ö‚£ø‚£î‚£ï‚£µ‚£µ‚£ø‚£ø‚¢†‚£ø‚¢†‚£Æ‚°à‚£å‚†®‚†Ö‚†π‚£∑‚°Ä‚¢±
‚°ù‚°µ‚†ü‚†à‚¢Ä‚£Ä‚£Ä‚°Ä‚†â‚¢ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£º‚£ø‚¢à‚°ã‚†¥‚¢ø‚°ü‚£°‚°á‚£ø‚°á‚°Ä
‚°ù‚†Å‚£†‚£æ‚†ü‚°â‚°â‚°â‚†ª‚£¶‚£ª‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ß‚†∏‚£ø‚£¶‚£•‚£ø‚°á‚°ø‚£∞‚¢ó
‚†Å‚¢∞‚£ø‚°è‚£¥‚£å‚†à‚£å‚†°‚†à‚¢ª‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£¨‚£â‚£â‚£Å‚£Ñ‚¢ñ‚¢ï
‚°Ä‚¢ª‚£ø‚°á‚¢ô‚†Å‚†¥‚¢ø‚°ü‚£°‚°Ü‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£∑‚£µ‚£µ
‚°ª‚£Ñ‚£ª‚£ø‚£å‚†ò‚¢ø‚£∑‚£•‚£ø‚†á‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚†õ‚†ª‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø
‚£∑‚¢Ñ‚†ª‚£ø‚£ü‚†ø‚†¶‚†ç‚†â‚£°‚£æ‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚¢∏‚£ø‚£¶‚†ô‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø
‚°ï‚°ë‚£ë‚£à‚£ª‚¢ó‚¢ü‚¢û‚¢ù‚£ª‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚†∏‚£ø‚†ø‚†É‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚°ø‚†Å]],
	},
	["halloween"] = {
		{
			"                                                                     ",
			"                                              ,           ^'^  _     ",
			"                                              )               (_) ^'^",
			"         _/\\_                    .---------. ((        ^'^          ",
			"         (('>                    )`'`'`'`'`( ||                 ^'^  ",
			"    _    /^|                    /`'`'`'`'`'`\\||           ^'^       ",
			"    =>--/__|m---               /`'`'`'`'`'`'`\\|                     ",
			"         ^^           ,,,,,,, /`'`'`'`'`'`'`'`\\      ,              ",
			"                     .-------.`|`````````````|`  .   )               ",
			"                   / .^. .^. \\|  ,^^, ,^^,  |  / \\ ((              ",
			"                  /  |_| |_|  \\  |__| |__|  | /,-,\\||              ",
			'       _         /_____________\\ |")| |  |  |/ |_| \\|              ',
			"      (\")         |  __   __  |  '==' '=='  /_______\\     _        ",
			"     (' ')        | /  \\ /  \\ |   _______   |,^, ,^,|    (\")      ",
			"      \\  \\        | |--| |--| |  ((--.--))  ||_| |_||   (' ')      ",
			'     _  ^^^ _      | |__| |("| |  ||  |  ||  |,-, ,-,|   /  /        ',
			"   ,' ',  ,' ',    |           |  ||  |  ||  ||_| |_||   ^^^         ",
			".,,|RIP|,.|RIP|,.,,'==========='==''=='==''=='=======',,....,,,,.,,..",
			"                                                                     ",
			"                         üëª Happy Halloween! üéÉ                      ",
			"                                                                     ",
		},
		{
			"                                                  ",
			"                           .,'                    ",
			"                        .''.'                     ",
			"                       .' .'                      ",
			"            .    ' . ~,'  `.~ . `    .            ",
			"       . '  .  '   .`:_. . _:'.   `  .  ` .       ",
			"     .'   .'     ,     .'^'.    .     `.   `.     ",
			"    .    .       .A.  .     . .A.       .    .    ",
			"               .d000b.      .d000b.               ",
			"   '    '    .d0000000b.  .d0000000b.    `    `   ",
			"   .    .      .      . db  .     .      .    .   ",
			"                       d00b                       ",
			"    `    `?0o.  `     `     '    '  .o0P'    '    ",
			"      .    `?00   ooooo.  .ooooo   00P' .   .     ",
			"       ` .   `?00000P ?0bd0P ?00000P' .' . '      ",
			"             . . `~~   ~~~~  .~~'  . .            ",
			"                 ~     - ~~ -    ~                ",
			"                                                  ",
			"              üëª Happy Halloween! üéÉ              ",
			"                                                  ",
		},
	},
	["xmas"] = {
		{
			"                                    ",
			"   ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£†‚°Ä‚£¥‚¢¶‚°Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚°¥‚†ñ‚¢¶‚°Ä‚†Ä‚†Ä‚£Ä‚°ò‚£ß‚†ô‚†ö‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£Ä‚°Ä‚†Ä‚†Ä‚†Ä‚¢ß‚£Ä‚£¥‚†É‚†Ä‚†ò‚¢Ø‚£≠‚†â‚£§‚†§‚†û‚†Å‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†Ä‚£∞‚¢≤‚£∏‚†Ñ‚¢ß‚°º‚£´‚†á‚¢Ä‚°º‚†â‚¢â‚£õ‚£í‚£∂‚£´‚†æ‚¢Å‚£Ä‚£Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†Ä‚†∏‚£Ñ‚£Ä‚£Ä‚£†‚¢Æ‚£ô‚£í‚£æ‚†¥‚†ä‚†â‚†â‚£à‚†â‚£∑‚¢û‚°Ω‚†ã‚°ø‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†Ä‚†Ä‚†Ä‚†â‚†â‚¢Ä‚£†‚£§‚£§‚£ß‚£Ä‚°¥‚†ö‚†â‚†â‚†â‚†É‚£æ‚°§‚†û‚†Å‚†Ä‚†Ä‚¢∞‚£≤‚£∂‚£µ‚£Ñ‚†Ä   ",
			"   ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†ª‚£ç‚£ô‚£í‚£Æ‚°ç‚†Ä‚†Ä‚°Ä‚¢Ä‚£Ä‚†Ä‚†à‚¢ß‚°Ä‚†Ä‚†Ä‚†Ä‚£û‚£ø‚°è‚°ø‚°∑‚†Å   ",
			"   ‚¢†‚°§‚£¥‚£∂‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†â‚¢π‚†Ä‚†Ä‚†ò‚†ø‚†ò‚†ã‚†Ä‚†Ä‚†Ä‚¢≥‚°Ä‚†Ä‚†Ä‚†Ä‚†π‚†ù‚†ä‚†ä‚†Ä   ",
			"   ‚¢∞‚°ï‚°ä‚£ª‚£ø‚†É‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚†Ä‚¢Ä‚°§‚†ñ‚°∫‚¢Ø‚†â‚†â‚†ì‚¢Ü‚¢ß‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†ë‚†∑‚†õ‚†õ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢∏‚¢∞‚†è‚†Ä‚†Ä‚†ì‚†ã‚†Ä‚°Ä‚†Ä‚°º‚°ø‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢à‚£Ø‚£ß‚£Ñ‚£à‚£í‚£í‚£©‚†¥‚¢ö‚£µ‚°á‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†ò‚£¶‚£è‚£≥‚†ª‚†ø‚°∑‚†≤‚†õ‚£ã‚£∏‚°è‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢Ä‚£Ä‚£Ä‚°Ä‚£∞‚†É‚†â‚†â‚¢ô‚°ø‚°ü‚†ã‚£≠‚†ç‚¢á‚¢≥‚°Ä‚¢Ä‚£Ä‚£Ñ‚†Ä‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚£æ‚†Ä‚¢ª‚†â‚°è‚†Ä‚†Ä‚†Ä‚£è‚°º‚¢â‚£†‚°ó‚†í‚¢π‚†à‚°è‚¢â‚°è‚†à‚°á‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚¢ª‚°Ä‚£æ‚†Ä‚°á‚†Ä‚†Ä‚†Ä‚£è‚†ì‚†¶‚¢û‚£Ø‚£©‚†ú‚†Ä‚°á‚†∏‚°á‚¢∞‚†É‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†ì‚†ß‚†ñ‚¢≥‚°ñ‚†ã‚†â‚¢π‚°∂‚†∂‚£æ‚†â‚†â‚†ì‚¢∂‚†ì‚†¶‚†ó‚†ã‚†Ä‚†Ä‚†Ä‚†Ä   ",
			"   ‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†à‚†õ‚†í‚†í‚†õ‚†Å‚†Ä‚†ò‚†ì‚†í‚†í‚†ã‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä‚†Ä   ",
			"                                    ",
			"           Merry Christmas!         ",
			"                                    ",
		},
	},
	["starwars"] = {
		{
			"     .    .     .            +         .         .                 .  .    ",
			"              .    ,,o         .                  __.o+.                   ",
			"    .            od8^                  .      oo888888P^b           .      ",
			'     .       ,".o\'      .     .             `b^\'""`b -`b   .             ',
			"             ,'.'o'             .   .          t. = -`b -`t.    .          ",
			"            ; d o' .        ___          _.--.. 8  -  `b  =`b              ",
			"        .  dooo8<       .o:':__;o.     ,;;o88%%8bb - = `b  =`b.    .       ",
			"  .     |^88^88=. .,x88/::/ | \\\\`;;;;;;d%%%%%88%88888/%x88888            ",
			"        :-88=88%%L8`%`|::|_>-<_||%;;%;8%%=;:::=%8;;\\%%%%\\8888            ",
			"      .   |=88 88%%|HHHH|::| >-< |||;%;;8%%=;:::=%8;;;%%%%+|]88        .   ",
			"          | 88-88%%LL.%.%b::Y_|_Y/%|;;;;`%8%%oo88%:o%.;;;;+|]88  .         ",
			"       Yx88o88^^'\"`^^%8boooood..-\\H_Hd%P%%88%P^%%^'\\;;;/%%88            ",
			'     . `"\\^\\          ~""""\'      d%P ""^" ;   = `+\' - P               ',
			"   .        `.`.b   .                :<%%>  .   :  -   d' - P      . .     ",
			"              .`.b     .        .    `788      ,'-  = d' =.'               ",
			"       .       ``.b.                           :..-  :'  P                 ",
			"            .   `q.>b         .               `^^^:::::,'       .          ",
			'                  ""^^               .                     .               ',
			"    .         .          .                 .        +         .            ",
			"                                                                           ",
			"                    Sienar Fleet Systems' TIE Bomber                       ",
			"                                                                           ",
		},
		{
			"                                                                              ",
			"                                                          _._        *        ",
			"                                        _______..........-`-'-..__  /         ",
			"                               ...###/   \\        \\         ____\\/         ",
			"                         ...########/     \\  ___...\\--     / _   \\         ",
			"                __..---#############/_..---'''     ========/ //  __\\____     ",
			"         __..--''  /     /  / --..__  ```-------________________//      =     ",
			"   __--''       /      /   /________=        \\                 //_______=    ",
			"  `-.._____  /       /    /             ___   \\               ______/__      ",
			"           `````-----------------------////----\\----------'''' ______//      ",
			"                                               /_____.....-----               ",
			"                                                                              ",
			"                        Ubrikkian's GAV Q7 Space-trotter                      ",
			"                                                                              ",
		},
		{
			"                                        .                                        ",
			"                              .-o                                                ",
			"                 .           /  |                                                ",
			"        .                 . /   |   .                                            ",
			"                           /    |                                                ",
			"                  .       /     |                                                ",
			"  .                      /      /         .                                      ",
			"             .          /    _./   .                                             ",
			"                   _.---~-.=:_                                                   ",
			"                  (_.-=() <~`-`-.                                                ",
			"                 _/ _() ~`-==-._,>                                               ",
			"         ..--====--' `~-._.__()                                                  ",
			"     o===''~~             |--()                                                  ",
			"                .         \\   |             .                                   ",
			"                          \\  \\                                                 ",
			"                           \\  \\     .                                          ",
			"       .                    \\  \\           Sienar Fleet Systems                ",
			"                .            \\  \\          Lambda-class Imperial Shuttle (3)   ",
			"                              \\_ \\        .                                    ",
			"                                 ~o                                              ",
			"                                                                                 ",
		},
	},
}

return M
